---
title: å½’å¹¶æ’åº
date: 2024-07-16
category:
  - ä»£ç ç¼–ç¨‹
  - ç®—æ³•
tag:
  - ç®—æ³•
sticky: true
star: true
order: -1
---

# å½’å¹¶æ’åº

## ä»‹ç»
**å½’å¹¶æ’åº**ï¼ˆ*Merge Sort*)æ˜¯ä¸€ç§åŸºäºåˆ†æ²»æ³•çš„æ’åºç®—æ³•ã€‚å®ƒçš„ä¸»è¦æ€æƒ³æ˜¯å°†ä¸€ä¸ªå¤§çš„é—®é¢˜åˆ†è§£æˆè‹¥å¹²ä¸ªå°é—®é¢˜æ¥è§£å†³ï¼Œç„¶åå°†è§£å†³çš„ç»“æœåˆå¹¶åœ¨ä¸€èµ·ã€‚å½’å¹¶æ’åºçš„æ—¶é—´å¤æ‚åº¦ä¸º ğ‘‚(ğ‘›logğ‘›),æ˜¯æ•ˆç‡è¾ƒé«˜çš„æ’åºç®—æ³•ä¹‹ä¸€ã€‚

## ä»£ç 

### è¿­ä»£
1. C
```
#include <stdio.h>
#include <stdlib.h>

int min(int x, int y)
{
    return x < y ? x : y;
}

void merge_sort(int arr[], int len)
{
    int *a = arr;
    int *b = (int *)malloc(len * sizeof(int));
    if (b == NULL)
    {
        fprintf(stderr, "Memory allocation failed\n");
        return;
    }
    int seg, start;
    for (seg = 1; seg < len; seg += seg)
    {
        for (start = 0; start < len; start += seg + seg)
        {
            int low = start, mid = min(start + seg, len), high = min(start + 2 * seg, len);
            int k = low;
            int start1 = low, end1 = mid;
            int start2 = mid, end2 = high;
            while (start1 < end1 && start2 < end2)
                b[k++] = a[start1] < a[start2] ? a[start1++] : a[start2++];
            while (start1 < end1)
                b[k++] = a[start1++];
            while (start2 < end2)
                b[k++] = a[start2++];
        }
        int *temp = a;
        a = b;
        b = temp;
    }
    if (a != arr)
    {
        for (int i = 0; i < len; i++)
            arr[i] = a[i];
    }
    free(b);
}

int main()
{
    int arr[] = {22, 34, 3, 32, 82, 55, 89, 50, 37, 5, 64, 35, 9, 70};
    int len = sizeof(arr) / sizeof(*arr);
    merge_sort(arr, len);
    for (int i = 0; i < len; i++)
        printf("%d ", arr[i]);
    printf("\n");
    return 0;
}
```

2. Python
```
def min(x, y):
    return x if x < y else y

def merge_sort(arr):
    n = len(arr)
    a = arr[:]
    b = [0] * n
    seg = 1
    while seg < n:
        for start in range(0, n, seg + seg):
            low = start
            mid = min(start + seg, n)
            high = min(start + seg + seg, n)
            k = low
            start1 = low
            end1 = mid
            start2 = mid
            end2 = high
            while start1 < end1 and start2 < end2:
                if a[start1] < a[start2]:
                    b[k] = a[start1]
                    start1 += 1
                else:
                    b[k] = a[start2]
                    start2 += 1
                k += 1
            while start1 < end1:
                b[k] = a[start1]
                start1 += 1
                k += 1
            while start2 < end2:
                b[k] = a[start2]
                start2 += 1
                k += 1
        a, b = b, a
        seg += seg

    if a != arr:
        for i in range(n):
            arr[i] = a[i]

arr = [38, 27, 43, 3, 9, 82, 10]
merge_sort(arr)
print(arr)
```
3. #### åˆ†æ
å…ˆå°†æ•°ç»„åˆ†ä¸º1ä¸ªä¸ºä¸€ç»„ï¼Œåˆ†äº†7ç»„ï¼Œ å†1ï¼Œ2ï¼›3ï¼Œ4ï¼›5ï¼Œ6ï¼›7ï¼›ä¸¤ä¸¤æ¯”è¾ƒï¼Œç»™æ¯”è¾ƒçš„ä¸¤ç»„å®šä¹‰ä¸€ä¸ªæŒ‡é’ˆï¼ŒæŒ‡é’ˆæ‰€æŒ‡çš„å€¼ç›¸äº’æ¯”è¾ƒ, ä¹Ÿå°±æ˜¯åœ¨è¿™ä¸ªå—`while start1 < end1 and start2 < end2`è¿›è¡Œï¼Œå°çš„å€¼æ’å·¦è¾¹ï¼Œç›´åˆ°æœ‰ä¸€ç»„çš„æŒ‡é’ˆæŒ‡å‘äº†æœ«å°¾ï¼›å¦‚æœå‰©çš„æ˜¯ç¬¬ä¸€ç»„çš„å°±è°ƒç”¨`while start1 < end1`è¿™ä¸ªå—ï¼Œå¦åˆ™è°ƒç”¨`while start2 < end2`è¿™ä¸ªå—ã€‚ä»¥æ­¤ç±»æ¨ï¼Œåˆ†æˆ4ç»„ï¼Œ åˆ†æˆ2ç»„......æœ€ç»ˆå¾—åˆ°æœ‰åºçš„æ•°åˆ—ã€‚

## é€’å½’
1. C
```
#include <stdio.h>
#include <stdlib.h> // åŠ å…¥æ­¤è¡Œä»¥ä¾¿ä½¿ç”¨ malloc å’Œ free

void merge_sort_recursive(int arr[], int reg[], int start, int end) {
    if (start >= end)
        return;
    int len = end - start, mid = (len >> 1) + start;
    int start1 = start, end1 = mid;
    int start2 = mid + 1, end2 = end;
    merge_sort_recursive(arr, reg, start1, end1);
    merge_sort_recursive(arr, reg, start2, end2);
    int k = start;
    while (start1 <= end1 && start2 <= end2)
        reg[k++] = arr[start1] < arr[start2] ? arr[start1++] : arr[start2++];
    while (start1 <= end1)
        reg[k++] = arr[start1++];
    while (start2 <= end2)
        reg[k++] = arr[start2++];
    for (k = start; k <= end; k++)
        arr[k] = reg[k];
}
void merge_sort(int arr[], const int len) {
    int reg[len];
    merge_sort_recursive(arr, reg, 0, len - 1);
}

int main() {
    int arr[] = { 22, 34, 3, 32, 82, 55, 89 };
    int len = sizeof(arr) / sizeof(*arr);
    merge_sort(arr, len);
    for (int i = 0; i < len; i++)
        printf("%d ", arr[i]);
    printf("\n"); // å¢åŠ æ¢è¡Œä»¥ç¾åŒ–è¾“å‡º
    return 0;
}
```

2. Python
```
def merge_sort_recursive(arr, reg, start, end):
    if start >= end:
        return
    mid = (start + end) // 2
    merge_sort_recursive(arr, reg, start, mid)
    merge_sort_recursive(arr, reg, mid + 1, end)
    start1, end1 = start, mid
    start2, end2 = mid + 1, end
    k = start
    while start1 <= end1 and start2 <= end2:
        if arr[start1] < arr[start2]:
            reg[k] = arr[start1]
            start1 += 1
        else:
            reg[k] = arr[start2]
            start2 += 1
        k += 1
    while start1 <= end1:
        reg[k] = arr[start1]
        start1 += 1
        k += 1
    while start2 <= end2:
        reg[k] = arr[start2]
        start2 += 1
        k += 1
    for k in range(start, end + 1):
        arr[k] = reg[k]

def merge_sort(arr):
    reg = [0] * len(arr)
    merge_sort_recursive(arr, reg, 0, len(arr) - 1)

# ç¤ºä¾‹ä½¿ç”¨
arr = [22, 34, 3, 32, 82, 55, 89]
merge_sort(arr)
print(arr)
```

3. ### åˆ†æ
é€»è¾‘å’Œè¿­ä»£æ³•å·®ä¸å¤šã€‚